<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JalRakshak | North East Flood Guardian</title>
    <!-- Modern Bold Typography for Indian Tech Aesthetic -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.150.1/build/three.module.js"
        }
    }
    </script>
</head>
<body>
    <div id="bg-canvas-container"></div>
    
    <nav>
        <div class="nav-container">
            <div class="logo">
                <div class="logo-box">
                    <i data-lucide="waves" class="logo-icon"></i>
                </div>
                <div>
                    <h1>JAL<span>RAKSHAK</span></h1>
                    <p>BHARAT FLOOD GUARDIAN</p>
                </div>
            </div>
            <div class="nav-right">
                <div class="demo-mode-toggle">
                    <span class="demo-label">JUDGING DEMO</span>
                    <label class="switch">
                        <input type="checkbox" id="demo-mode-checkbox">
                        <span class="slider round"></span>
                    </label>
                </div>
                <div class="status-badge">
                    <div class="dot"></div>
                    <span>SURAKSHIT BHARAT LIVE</span>
                </div>
            </div>
        </div>
    </nav>

    <main id="app">
        <!-- Input Screen -->
        <section id="selection-view" class="view active">
            <div class="hero-text">
                <div class="badge-pill">NE REGION PILOT ‚Ä¢ PHASE 1</div>
                <h2>Voice-First <span>Flood</span> Guardian</h2>
                <p>Localized intelligence for Assam & North East. Real-time alerts in your mother tongue.</p>
            </div>

            <div class="action-card">
                <div class="card-accent"></div>
                <div class="card-inner">
                    <button id="btn-location" class="location-btn">
                        <i data-lucide="navigation"></i>
                        Auto-Detect My District
                    </button>

                    <div id="location-status" class="status-box hidden">
                        <i data-lucide="map-pin"></i>
                        <div class="status-details">
                            <span class="label">LOCATION FIXED</span>
                            <span id="coords-text">Fetching...</span>
                        </div>
                        <span class="accuracy-badge">GPS VERIFIED</span>
                    </div>

                    <div class="form-grid">
                        <div class="field">
                            <label>SELECT STATE</label>
                            <div class="select-wrapper">
                                <select id="state-select">
                                    <option value="">Choose State</option>
                                </select>
                            </div>
                        </div>
                        <div class="field">
                            <label>SELECT DISTRICT</label>
                            <div class="select-wrapper">
                                <select id="district-select" disabled>
                                    <option value="">Select State First</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <button id="btn-analyze" class="cta-button" disabled>
                        <span>Check Local Flood Risk</span>
                        <i data-lucide="chevron-right"></i>
                    </button>
                </div>
            </div>

            <div class="trust-footer">
                <div class="trust-item"><i data-lucide="database"></i> IMD FEED</div>
                <div class="trust-item"><i data-lucide="activity"></i> CWC GAUGE</div>
                <div class="trust-item"><i data-lucide="satellite"></i> SENTINEL-1</div>
                <div class="trust-item"><i data-lucide="lock"></i> NO DATA STORED</div>
            </div>
            <p class="tagline-small">Early alerts. Local languages. Real data. üáÆüá≥</p>
        </section>

        <!-- Result Screen -->
        <section id="dashboard-view" class="view">
            <div class="dashboard-header">
                <button class="back-btn"><i data-lucide="arrow-left"></i> Change Region</button>
                <h3 id="display-location">Location, <span>State</span></h3>
            </div>

            <div class="dashboard-grid">
                <!-- Main Risk Card -->
                <div id="risk-card" class="main-card risk-low">
                    <span class="card-label">CURRENT RISK LEVEL</span>
                    <div class="risk-indicator">
                        <div class="risk-icon-wrap">
                            <i id="risk-icon" data-lucide="shield-check"></i>
                        </div>
                        <h2 id="risk-level">LOW</h2>
                    </div>
                    <div class="risk-action">
                        <p>Confidence: <span id="confidence-pct">0</span>%</p>
                        <button id="jump-to-alerts" class="link-btn">Listen to Alert <i data-lucide="volume-2"></i></button>
                    </div>
                </div>

                <!-- Signal Fusion Card -->
                <div class="main-card signal-card">
                    <div class="card-top">
                        <h4>Signal Fusion</h4>
                        <span class="live-tag">LIVE</span>
                    </div>
                    <div class="signals-list">
                        <div class="signal-item">
                            <div class="sig-icon blue"><i data-lucide="cloud-rain"></i></div>
                            <div class="sig-info">
                                <span class="label">IMD RAINFALL</span>
                                <p id="val-rain">--</p>
                            </div>
                        </div>
                        <div class="signal-item">
                            <div class="sig-icon indigo"><i data-lucide="droplets"></i></div>
                            <div class="sig-info">
                                <span class="label">RIVER LEVEL</span>
                                <p id="val-river">--</p>
                            </div>
                        </div>
                        <div class="signal-item">
                            <div class="sig-icon cyan"><i data-lucide="satellite"></i></div>
                            <div class="sig-info">
                                <span class="label">SAR INFERENCE</span>
                                <p id="val-sar">--</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Inference Card -->
                <div class="main-card ai-card">
                    <div class="ai-content">
                        <span class="ai-badge">SATELLITE AI</span>
                        <h4>Sentinel-1 Water Mask</h4>
                        <p>Our AI scans radar imagery to find hidden water under clouds.</p>
                        <button id="btn-sar-run" class="mini-cta">Run AI Scan</button>
                    </div>
                    <div class="ai-viz">
                        <div id="radar-viz" class="radar-box">
                            <div class="radar-line"></div>
                            <i data-lucide="satellite"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Voice Alert Section -->
            <div id="alerts-container" class="alert-section">
                <div class="section-title">
                    <h4>Multilingual Voice Alert</h4>
                    <p>Broadcast ready for local disaster management</p>
                </div>

                <div class="alert-box">
                    <div class="alert-nav">
                        <div class="lang-tabs">
                            <button class="tab-btn active" data-lang="en">English</button>
                            <button class="tab-btn" data-lang="as">‡¶Ö‡¶∏‡¶Æ‡ßÄ‡¶Ø‡¶º‡¶æ</button>
                            <button class="tab-btn" data-lang="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</button>
                            <button class="tab-btn" data-lang="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
                        </div>
                        <div class="audio-controls">
                            <div class="volume-box">
                                <i data-lucide="volume-1"></i>
                                <input type="range" id="vol-slider" min="0" max="1" step="0.1" value="0.8">
                            </div>
                            <div id="viz-bars" class="viz-bars hidden">
                                <span></span><span></span><span></span><span></span><span></span>
                            </div>
                            <button id="play-alert-btn" class="play-btn">
                                <i data-lucide="play"></i> <span>PLAY ALERT</span>
                            </button>
                        </div>
                    </div>
                    <div class="alert-content">
                        <i data-lucide="quote" class="quote-bg"></i>
                        <p id="alert-display-text">Analyzing risk data...</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div id="toast-notify" class="toast-popup hidden"></div>

    <footer>
        <div class="footer-wrap">
            <div class="footer-info">
                <div class="footer-logo">
                    <i data-lucide="waves"></i>
                    <span>JALRAKSHAK BHARAT</span>
                </div>
                <p>Autonomous Flood Intelligence for the Last Mile.</p>
            </div>
            <div class="footer-disclaimer">
                <i data-lucide="shield-check"></i>
                <p>Built for North East Disaster Management. No personal data is stored. üáÆüá≥</p>
            </div>
        </div>
        <div class="footer-bottom">
            ‚ÄúJalRakshak turns public rainfall history, river levels, and satellite flood mask interpretation into AI-generated multilingual voice alerts. Built for real pilot testing in the North East.‚Äù
        </div>
    </footer>

    <script type="module" src="background.js"></script>
    <script src="app.js"></script>
    <script>
        lucide.createIcons();
    </script>
</body>
</html>
